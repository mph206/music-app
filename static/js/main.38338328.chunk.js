(this["webpackJsonpmusic-app"]=this["webpackJsonpmusic-app"]||[]).push([[0],[,,,,,,,,function(t,e,a){t.exports={artists:"Artists_artists__pNLOW",small:"Artists_small__1ckAp",expand:"Artists_expand__2qnZ5",artist:"Artists_artist__2hqc0",icon:"Artists_icon__10IHG"}},function(t,e,a){t.exports={albums:"Albums_albums__3hnLx",small:"Albums_small__zo5hx",expand:"Albums_expand__1xz8v",icon:"Albums_icon__4vR6T"}},function(t,e,a){t.exports={lyrics:"Lyrics_lyrics__2IwX5",noChoice:"Lyrics_noChoice__P5ipr"}},function(t,e,a){t.exports={songs:"Songs_songs__socNW",expand:"Songs_expand__1a4r-"}},,,,,function(t,e,a){t.exports={nav:"Nav_nav__2p4vD"}},function(t,e,a){t.exports={searchbar:"SearchBar_searchbar__lEo3K"}},function(t,e,a){t.exports={results:"SearchResult_results__2M46K"}},function(t,e,a){t.exports=a(31)},,,,,function(t,e,a){},function(t,e,a){},,,,,,function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(15),c=a.n(s),o=(a(24),a(2)),i=a(3),l=a(5),u=a(4),m=(a(25),a(16)),p=a.n(m),h=a(17),b=a.n(h),d=a(6),f=a(7),g=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={},t}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:b.a.searchbar},r.a.createElement("input",{type:"text",onChange:this.props.fetchArtistData,placeholder:"Search Artist",autoFocus:!0}),r.a.createElement(d.a,{icon:f.b}))}}]),a}(n.Component),A=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={},t}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{className:p.a.nav},r.a.createElement("h1",null,"Spotify Song Search"),r.a.createElement(g,{fetchArtistData:this.props.fetchArtistData}))}}]),a}(n.Component),y=a(18),D=a.n(y),v=a(9),E=a.n(v),_=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).buildAlbumData=function(){return t.props.albumData.map((function(e,a){return r.a.createElement("div",{key:e.id,value:e.id,"album-index":a,onClick:t.props.fetchSongData},e.images.length>0?r.a.createElement("img",{src:e.images[2].url,alt:"album cover"}):r.a.createElement(d.a,{className:E.a.icon,icon:f.a}),r.a.createElement("h3",{value:e.id,"album-index":a},e.name))}))},t.showArtistImage=function(){return t.props.artistImage.length>1?r.a.createElement("header",null,r.a.createElement("h2",null,"Albums by ",t.props.selectedArtist),r.a.createElement("img",{src:t.props.artistImage,alt:"artist"})):null},t.autoExpand=function(){return 0===t.props.albumData.length?null:0===t.props.songData.length?E.a.expand:E.a.small},t}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"".concat(E.a.albums," ").concat(this.autoExpand())},this.showArtistImage(),this.buildAlbumData())}}]),a}(n.Component),j=a(8),S=a.n(j),x=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).buildArtistData=function(){return t.props.artistData.map((function(e,a){return void 0!==e?r.a.createElement("div",{className:S.a.artist,key:e.id,"artist-index":a,value:e.id,onClick:t.props.fetchAlbumData},e.images.length>0?r.a.createElement("img",{src:e.images[2].url,alt:"artist"}):r.a.createElement(d.a,{className:S.a.icon,icon:f.c}),r.a.createElement("h2",{value:e.id,"artist-index":a},e.name)):""}))},t.autoExpand=function(){return 0===t.props.artistData.length?null:0===t.props.albumData.length?S.a.expand:S.a.small},t}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"".concat(this.autoExpand()," ").concat(S.a.artists)},this.buildArtistData())}}]),a}(n.Component),O=a(11),k=a.n(O),w=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).buildSongData=function(){return t.props.songData.map((function(e){return r.a.createElement("div",{key:e.id,"track-number":e.track_number,value:e.name,onClick:t.props.fetchLyrics},r.a.createElement("h3",{"track-number":e.track_number,value:e.name},e.name))}))},t.showAlbumText=function(){return t.props.selectedAlbum?r.a.createElement("header",null,r.a.createElement("h2",null,"Songs from ",t.props.selectedAlbum," by ",t.props.selectedArtist)):null},t.autoExpand=function(){return 0===t.props.songData.length?k.a.songs:"".concat(k.a.songs," ").concat(k.a.expand)},t}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:this.autoExpand()},this.showAlbumText(),this.buildSongData())}}]),a}(n.Component),I=a(10),N=a.n(I),C=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).renderLyrics=function(){return t.props.lyrics?r.a.createElement("p",null,t.props.lyrics):null},t.promptUser=function(){return t.props.selectedSong?r.a.createElement("h2",null,"".concat(t.props.selectedSong.replace(/[+]/g," ")," - ").concat(t.props.selectedArtist)):t.props.albumImage?r.a.createElement("h2",null,"Choose a song"):t.props.selectedArtist?r.a.createElement("h2",{className:N.a.noChoice},"Choose an album"):t.props.artistData.length>0?r.a.createElement("h2",{className:N.a.noChoice},"Choose an artist"):r.a.createElement("h2",{className:N.a.noChoice},"Search for an artist")},t}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:N.a.lyrics,style:{backgroundImage:"url(".concat(this.props.albumImage,")")}},r.a.createElement("article",null,this.promptUser(),this.renderLyrics()))}}]),a}(n.Component),L=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:D.a.results},this.props.dataObject,r.a.createElement(x,{artistData:this.props.artistData,fetchAlbumData:this.props.fetchAlbumData,albumData:this.props.albumData}),r.a.createElement(_,{fetchSongData:this.props.fetchSongData,albumData:this.props.albumData,artistImage:this.props.artistImage,selectedArtist:this.props.selectedArtist,songData:this.props.songData,artistData:this.props.artistData}),r.a.createElement(w,{songData:this.props.songData,fetchLyrics:this.props.fetchLyrics,selectedArtist:this.props.selectedArtist,selectedAlbum:this.props.selectedAlbum,albumImage:this.props.albumImage}),r.a.createElement(C,{fetchLyrics:this.props.fetchLyrics,lyrics:this.props.lyrics,songData:this.props.songData,albumImage:this.props.albumImage,selectedSong:this.props.selectedSong,selectedArtist:this.props.selectedArtist,artistData:this.props.artistData}))}}]),a}(n.Component),T=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={token:"",artistData:[],albumData:[],songData:[],selectedArtist:"",artistImage:"",selectedAlbum:"",albumImage:"",lyrics:"",selectedSong:""},t.fetchArtistData=function(e){t.setState({albumData:[],artistData:[],songData:[],selectedArtist:"",artistImage:"",selectedAlbum:"",albumImage:"",lyrics:"",selectedSong:""});var a=e.target.value.split(" ").join("+");fetch("https://api.spotify.com/v1/search?q=".concat(a,"&type=artist&limit=10"),{headers:{Authorization:"Bearer ".concat(t.state.token),"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){return t.setState({artistData:e.artists.items})})).catch((function(t){return console.log("error",t)}))},t.fetchAlbumData=function(e){t.setState({songData:[],albumData:[],lyrics:"",selectedAlbum:"",selectedArtist:"",selectedSong:"",albumImage:""});var a=e.target.getAttribute("artist-index"),n=e.target.getAttribute("value");fetch("https://api.spotify.com/v1/artists/".concat(n,"/albums"),{headers:{Authorization:"Bearer ".concat(t.state.token),"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){return t.setState({albumData:e.items,selectedArtist:t.state.artistData[a].name,artistImage:t.state.artistData[a].images[1].url})})).catch((function(t){return console.log("error",t)}))},t.fetchSongData=function(e){t.setState({lyrics:"",selectedSong:""});var a=e.target.getAttribute("album-index"),n=e.target.getAttribute("value");fetch("https://api.spotify.com/v1/albums/".concat(n,"/tracks"),{headers:{Authorization:"Bearer ".concat(t.state.token),"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){return t.setState({songData:e.items,selectedAlbum:t.state.albumData[a].name,albumImage:t.state.albumData[a].images[0].url})})).catch((function(t){return console.log("error",t)}))},t.fetchLyrics=function(e){var a=e.target.getAttribute("value").split(" / ").slice(0,2)[0].split(" - ").slice(0,2)[0],n=t.state.selectedArtist;t.setState({selectedSong:a}),fetch("https://api.lyrics.ovh/v1/".concat(n,"/").concat(a)).then((function(e){return 404!==e.status?e.json().then((function(e){return t.setState({lyrics:e.lyrics})})):t.setState({lyrics:"Lyrics not found"})})).catch((function(e){console.log("Error is"+e),t.setState({lyrics:e.error})}))},t}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=new Headers;e.append("Authorization","Basic YzIxOWE5Y2EwYTQ1NDY0YjllY2Q2NGI5YTBjZjMwY2M6NGZkNmJlMjYxNWVkNGZlNThlNTA4ZTg3NGI3MGI4ZGY=");var a=new URLSearchParams;a.append("grant_type","client_credentials"),fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:e,body:a}).then((function(t){return t.json()})).then((function(e){return t.setState({token:e.access_token})})).catch((function(t){return console.log("error",t)}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{fetchArtistData:this.fetchArtistData}),r.a.createElement(L,{artistData:this.state.artistData,albumData:this.state.albumData,fetchAlbumData:this.fetchAlbumData,fetchSongData:this.fetchSongData,songData:this.state.songData,selectedArtist:this.state.selectedArtist,artistImage:this.state.artistImage,selectedAlbum:this.state.selectedAlbum,albumImage:this.state.albumImage,fetchLyrics:this.fetchLyrics,lyrics:this.state.lyrics,selectedSong:this.state.selectedSong}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[19,1,2]]]);
//# sourceMappingURL=main.38338328.chunk.js.map